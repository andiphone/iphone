(function(f){var n=window.AmazonUIPageJS||window.P,z=n._namespace||n.attributeErrors,d=z?z("TurboCheckoutBaseAssets",""):n;d.guardFatal?d.guardFatal(f)(d,window):d.execute(function(){f(d,window)})})(function(f,n,z){"use strict";f.register("turbo-function-adapter",function(){return{adapt:function(d){return function(){if("function"!==typeof d)throw"Parameter 'property' is invalid. Expected a function but got "+typeof d;return d.apply(d,arguments)}}}});"use strict";f.when("turbo-configuration","turbo-function-adapter").execute("turbo-signin-adapter-factory",
function(d,c){f.when(d.get(d.KEYS.SHOW_SIGN_IN_INTERFACE)).register("turbo-signin-adapter",function(a){return{show:c.adapt(a.show)}})});"use strict";f.when("turbo-configuration","turbo-function-adapter").execute("turbo-view-adapter-factory",function(d,c){f.when(d.get(d.KEYS.VIEW_ADAPTER)).register("turbo-view-adapter",function(a){return{registerCallbacks:c.adapt(a.registerCallbacks),close:c.adapt(a.close),show:c.adapt(a.show),removeContent:c.adapt(a.removeContent),setContent:c.adapt(a.setContent),
closeImmediatelyThenExecute:c.adapt(a.closeImmediatelyThenExecute),closeAndNavigate:c.adapt(a.closeAndNavigate),closeToFullscreen:c.adapt(a.closeToFullscreen),updateBounds:c.adapt(a.updateBounds)}})});"use strict";f.when("turbo-checkout-page-ready").execute(function(){f.declare("turbo-eligibility-override",!1)});"use strict";f.when("A","turbo-checkout-csm","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-address-id",function(d,c,a){function b(a){for(var b=0;b<a.length;b++){var d=
e(a[b]);if(0<d.length)return c.logCount("turboCheckoutAddressSelectorIndex"+b),d}c.logCount("turboCheckoutAddressSelectorMissing");return e()}var e=d.$;return{getAddressId:function(){return b(a.get(a.KEYS.ADDRESS_INPUT_SELECTORS)).val()||""},set:function(c){b(a.get(a.KEYS.ADDRESS_INPUT_SELECTORS)).val()!==c&&b(a.get(a.KEYS.ADDRESS_INPUT_SELECTORS)).val(c).trigger("change",[c])}}});"use strict";f.when("A","turbo-checkout-utils","turbo-callback-list","turbo-configuration","turbo-checkout-load-events",
"turbo-checkout-page-ready").register("turbo-checkbox-exclusion-listener",function(d,c,a,b,e){function g(a){var c=p;p=!1;for(var b=0;b<m.length;b++){var e=q(m[b]).find("input[type\x3dcheckbox]");a(e)}c!==p&&(l("Exclusion checkbox state changed"),v.callAll("exclusionCheckbox"))}function k(a){var c;if(!(c=p)){c=!1;for(var b=0;b<a.length&&!c;b++){var e=q(a[b]);(c=e.prop("checked"))&&l("Exclusion checkbox is checked",e)}}p=c}function l(a,b){c.logDebug("turbo-checkbox-exclusion-listener",a,b)}function h(){g(k)}
var m=b.get(b.KEYS.CHECKBOX_EXCLUSION_ROOT_NODES),q=d.$,v=a.create(),p=!1;e.bind(function(){g(function(a){l("Listening for change events on:",a);a.unbind("change",h).bind("change",h);k(a)})});return{onStateChange:function(a){v.push(a)},isAnyCheckboxChecked:function(){return p}}});"use strict";f.when("A","turbo-callback-list","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-custom-price-input",function(d,c,a){function b(){var a=e();l!==a&&(l=a,k.callAll())}function e(){return g("#gcPriceOverride").val()||
""}var g=d.$,k=c.create(),l;a.bind(function(){l=e();g("#gcPriceOverride").unbind("change",b).bind("change",b)});return{getCustomPrice:e,onChange:function(a){k.push(a)}}});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-callback-list","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-quantity-input",function(d,c,a,b,e,g){function k(c){var b;b=c?c.value?parseInt(c.value,10):c.target&&c.target.value?parseInt(c.target.value,
10):void 0:void 0;p===b?a.logDebug("turbo-checkout-quantity-input","Quantity change event does NOT have new quantity. Suppressing callbacks",void 0):(p=b,a.logDebug("turbo-checkout-quantity-input","Quantity change event",c),m.callAll())}function l(a){a=a.val();(a=parseInt(a,10))||c.logCount("turboCheckoutNoQuantityFromPage");return a}var h=d.$,m=e.create(),q=b.get(b.KEYS.QUANTITY_SELECT_SELECTOR),v="Multiple quantity nodes present on the page. This may lead to an incorrect quantity being used in Turbo! Selector \x3d "+
q,p;g.bind(function(){var b=h(q);p=l(b);b.unbind("change",k).bind("change",k);1<b.length&&(a.logError(v,"turbo-checkout-quantity-input"),a.logDebug("turbo-checkout-quantity-input",v,b));c.logCount("turboCheckoutQuantityNodes",b.length)});return{getQuantity:function(){return l(h(q))},setQuantity:function(a){var c=h(q),b=l(c);a=parseInt(a,10);b!==a&&c.val(a).change()},onChange:function(a){m.push(a)}}});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-callback-list","turbo-configuration",
"turbo-checkout-quantity-input","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-warranty-input",function(d,c,a,b,e,g,k){var l=d.$,h=b.create(),m=e.get(e.KEYS.WARRANTY_CHECKBOX_INPUT_SELECTOR),q=e.get(e.KEYS.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR),v=e.get(e.KEYS.WARRANTY_ASIN_INPUT_NAME),p=e.get(e.KEYS.WARRANTY_OFFER_INPUT_SELECTOR);k.bind(function(){l(m).unbind("click",h.callAll).bind("click",h.callAll)});return{select:function(a){a&&l(q+" input[name^\x3d"+v+
"][value\x3d"+a+"]").parents(q).find(m).click()},onChange:function(a){h.push(a)},getLineItem:function(b){if(l(m+":checked").length){var e=l(m+":checked").first().parents(q).find("input[name^\x3d"+v+"]").val()||"",d=l(p).val()||"";b=parseInt(b,10)||g.getQuantity()||1;if(e&&d)return{asin:e,offerListingId:d,quantity:b};c.logCount("turboCheckoutIncompleteWarrantyInputs");a.logError("Incomplete input data for the selected warranty checkbox - asin:"+e+", offerId:"+d+", quantity:"+b)}else a.logDebug("turbo-checkout-warranty-input",
"No warranty checkbox is selected",void 0)}}});"use strict";f.when("A","turbo-checkout-csm","turbo-callback-list","turbo-configuration","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-vas-input",function(d,c,a,b,e){function g(){return m(l).prop("checked")||!1}function k(){var a=v;v=g();a!==v&&q.callAll(v)}var l=b.get(b.KEYS.VAS_CHECKBOX_SELCTOR),h=b.get(b.KEYS.VAS_CHANGE_EVENTS),m=d.$,q=a.create(),v;e.bind(function(){v=g();h.forEach(function(a){d.off(a,k);d.on(a,
k)})});return{isSelected:g,onChange:function(a){q.push(a)}}});"use strict";f.when("A","turbo-checkout-utils","turbo-callback-list","turbo-checkout-load-events","turbo-checkout-csm","turbo-checkout-aui-page-state-parser","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-accessories-input",function(d,c,a,b,e,g,k){function l(){var a=t;t=A();t!==a&&u.callAll()}function h(){if(w===z&&r(x).length){var a=g.parse("simpleBundleParameterMap",".simpleBundleFeatureContainer");0===a.length?
(e.logCount("Turbo:Accessories:No:State"),w={}):m(a)}}function m(a){w={};a[0].items.forEach(function(a){w[a.asin]={asin:a.asin,offerListingId:a.offerListingId}})}function q(){return r(x).find("input[type\x3dcheckbox]")}function v(){q().unbind("change",l).bind("change",l)}function p(){return r(x).length?1>=t:0===t}function A(){var a=0;q().each(function(){r(this).prop("checked")&&a++});c.logDebug("turbo-checkout-accessories-input","Accessories selected "+a);return a}var r=d.$,u=a.create(),t=0,w,x=k.get(k.KEYS.ENABLED_ACCESSORIES_SELECTOR);
h();v();b.bind(function(){h();v();A()});return{isEligible:p,registerCallback:function(a){u.push(a)},getLineItem:function(){if(p()){var a;a=q().filter(":checked").val();a=w?w[a]:void 0;return a||z}return z},select:function(a){a&&r(x+" input[type\x3dcheckbox][value\x3d"+a+"]").click()}}});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-form","turbo-checkout-ref-tagger","turbo-checkout-page-state","turbo-checkout-product-state","turbo-checkout-page-ready").register("turbo-checkout-joined-state",
function(d,c,a,b,e,g,k){function l(a,c,b){c&&(b&&(c.quantity=b),a.push(c))}function h(a,g){function k(){var b=a.turboWeblab;b||c.logCount("turboCheckoutWeblabNameNotDefinedInState");return b}function h(){return a.turboWeblabTreatment}this.pageState=a;this.productStates=g;this.getLineItems=function(){return r.lineItemInputs};this.getActiveId=function(){return r.id};this.getHeaderText=function(){return r?r.turboHeaderText||a.turboHeaderText:a.turboHeaderText};this.getLoadingText=function(){return a.turboLoadingText};
this.getAddressId=function(){return a.addressId};this.getRequestId=function(){return a.requestId};this.getSessionId=function(){return a.sessionId};this.getInitiateSelector=function(){return a.initiateSelector};this.getWeblab=k;this.getWeblabTreatment=h;this.isTurboLaunched=function(){return!k()&&"C"!==h()};this.isProductStateEligible=function(){return g.isTurboEligible};this.getRefTag=function(){if(!r)throw"Turbo checkout product state is NOT resolved. Cannot generate ref tag";var a=d.$("#"+r.id),
a=b.getRefTag(a);return e.generateJoinedValue(a)};this.resolve=function(a){if(a){r=g.states[a];if(!r)throw a="Resolved turbo checkout product state is undefined. Id \x3d "+a,m(a,g),a;m("Resolved new product state",r);d.trigger("turbo:checkout:state:product:resolved")}};var r=1!==g.states.length?z:g.states[0]}function m(c,b){a.logDebug("turbo-checkout-joined-state",c,b)}return{createTurboState:function(a,b,e,d,r,u){if(d&&e)throw"Custom item price is NOT supported with warranty";var m=g.get();b&&(m.addressId=
b);b=k.get();if(a||d||e||u)a=parseInt(a,10),b.states.forEach(function(b){b.lineItemInputs.forEach(function(b){a&&(b.quantity=a);d?(b.customItemPrice=d,c.logCount("turboCheckoutItemPriceOverrided")):b.customItemPrice&&c.logCount("turboCheckoutItemPriceSelectorFallBackToTurboState")});l(b.lineItemInputs,u,a);l(b.lineItemInputs,e,a)});m=new h(m,b);m.resolve(r);return m}}});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-checkout-aui-page-state-parser",
"turbo-checkout-page-ready").register("turbo-checkout-page-state",function(d,c,a,b,e){function g(a,b,c,e,d,g,k,h,l){this.version=a;this.turboWeblab=b;this.turboWeblabTreatment=c;this.initiateSelector=e;this.turboLoadingText=d;this.turboHeaderText=g;this.addressId=k;this.requestId=h;this.sessionId=l}function k(b,c){a.logDebug("turbo-checkout-page-state",b,c)}var l=b.get(b.KEYS.TURBO_PAGE_STATE_KEY),h=b.get(b.KEYS.PAGE_STATE_PARSING_ROOT_NODE_SELECTOR),m=new g("0","","C","#buy-now-button","","","",
"","");return{get:function(b,d){b=b||l;d=d||h;d=e.parse(b,d);c.logCount("turboCheckoutPageStates",d.length);1<d.length?(a.logError("Multiple turbo checkout page states found! Turbo will NOT show","turbo-checkout-page-state",void 0),k("PageStates",d),b=void 0):(0===d.length&&k("Turbo checkout page state ["+b+"] is NOT present"),b=d[0]);if(b)if(b.version)b=new g(b.version,b.turboWeblab||"",b.turboWeblabTreatment||"C",b.initiateSelector||".buy-now-button",b.turboLoadingText||"",b.turboHeaderText||"",
b.addressId||"",b.requestId||"",b.sessionId||"");else{d=b.inputs||{};var p=b.strings||{};b=new g("1",b.turboWeblab||"",b.turboWeblabTreatment||"C",(b.configurations||{}).initiateSelector||"#buy-now-button",p.TURBO_LOADING_TEXT||"",p.TURBO_CHECKOUT_HEADER||"",d.addressId||"",d.requestId||"",d.sessionId||"")}else c.logCount("turboCheckoutStateNotDefined"),b=m;k("Turbo Checkout PageState",b);return b}}});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-checkout-aui-page-state-parser",
"turbo-checkout-page-ready").register("turbo-checkout-product-state",function(d,c,a,b,e){function g(a,b){this.isTurboEligible=a;this.states=b}function k(a,b,c,d){this.id=a;this.isTurboEligible=b;this.lineItemInputs=c;this.turboHeaderText=d||""}function l(a,b,c,d,e,g,k,q){this.asin=b||"";this.offerListingId=c||"";this.quantity=parseInt(d,10)||1;this.isTurboEligible=!!this.asin&&!!this.offerListingId&&a;this.productTitle=e||"";this.customItemPrice=g||"";this.addToCartTimeAsUnixEpochMilliseconds=k||
"";this.addToCartSessionId=q||""}function h(b,c){a.logDebug("turbo-checkout-product-state",b,c)}function m(a){if(!a.lineItemInputs||!a.lineItemInputs.length||!a.id)return h('Versioned product state is invalid. Expected non empty "id" and "lineItemInputs". Turbo may NOT show',a),p;var b=!0,c=d.map(a.lineItemInputs,function(a){a=new l(a.isTurboEligible,a.asin,a.offerListingId,a.quantity,a.productTitle,a.customItemPrice,a.addToCartTimeAsUnixEpochMilliseconds,a.addToCartSessionId);b=b&&a.isTurboEligible;
return a});return new k(a.id,b,c,a.turboHeaderText)}var q=b.get(b.KEYS.TURBO_PRODUCT_STATE_KEY),v=b.get(b.KEYS.PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR),p=new k("buy-now-button",!1,[],""),A=new g(!1,[p]);return{get:function(b,d){b=b||q;d=d||v;d=e.parse(b,d);c.logCount("turboCheckoutProductStates",d.length);1<d.length&&"turbo-checkout-page-state"===b?(a.logError("turbo-checkout-page-state only supports the single item use case! Turbo will NOT show","turbo-checkout-product-state",void 0),b=[]):b=d;
if((d=b)&&d.length){var t=!1;b=[];for(var w=0;w<d.length;w++){var x;var f=d[w];f?f.version?x=m(f):f.inputs&&f.eligibility?(x=f.strings||{},f=new l(f.eligibility.isEligible,f.inputs.a,f.inputs.oid,f.inputs.quantity,x.TURBO_CHECKOUT_HEADER,f.inputs.customItemPrice),x=new k("buy-now-button",f.isTurboEligible,[f],x.TURBO_CHECKOUT_HEADER)):(h('Legacy product state is missing "inputs" or "eligibility". Turbo will NOT show',f),x=p):(h("Product state parsed DOM object is invalid. Turbo may NOT show",f),x=
p);t=t||x.isTurboEligible||!1;f=x.id;if(b[f])throw d="Duplicate product state found. id \x3d "+f,h(d,b),d;b.push(x);b[x.id]=x}b=new g(t,b)}else h("Parsed states are invalid. Turbo will NOT show",d),b=A;h("Turbo Checkout Product State(s)",b);return b}}});"use strict";f.when("A","turbo-configuration","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-auto-open","turbo-checkout-address-id","turbo-checkout-quantity-input","turbo-checkout-warranty-input","turbo-checkout-custom-price-input","turbo-callback-list",
"turbo-checkout-joined-state","turbo-checkout-accessories-input","turbo-checkout-page-ready").register("turbo-checkout-state-handler",function(d,c,a,b,e,g,k,l,h,m,q,v){function p(a,b,c,d,e,p){a=a||k.getQuantity();b=b||g.getAddressId();c=c||l.getLineItem(a);d=d||h.getCustomPrice();p=p||v.getLineItem();return q.createTurboState(a,b,c,d,e,p)}function f(a,c){b.logDebug("turbo-checkout-state-handler",a,c)}function r(a,b,c,d,e){y=p(a,b,c,z,d,e)}function u(){d.trigger("turbo:checkout:product:onChange");
n.callAll()}function t(){var a=p();b.isDeepEquals(y,a)||(y=a,f("New Turbo State",y),u())}var w=d.$,x=c.get(c.KEYS.TURBO_STATE_CHANGE_AUI_EVENTS),n=m.create(),y,B=!1;y=p();return{isProductTurboEligible:function(){return!B&&y.isProductStateEligible()||c.get(c.KEYS.OVERRIDE_ELIGIBILITY)},getLineItems:function(){return y.getLineItems()},getAddressId:function(){return y.getAddressId()},getWeblabAllocation:function(){return y.getWeblabTreatment()},registerCallback:function(a){n.push(a)},startMonitoringPage:function(){e.updateInputsAndThen(r);
k.onChange(t);l.onChange(t);h.onChange(t);v.registerCallback(t);x.forEach(function(a){d.off(a,t);d.on(a,t)});u()},getRequestId:function(){return y.getRequestId()},getSessionId:function(){return y.getSessionId()},getExperimentName:function(){return y.getWeblab()},getStrings:function(){return{TURBO_LOADING_TEXT:y.getLoadingText(),TURBO_CHECKOUT_HEADER:y.getHeaderText()}},getInitiateSelector:function(){return y.getInitiateSelector()},isTurboLaunched:function(){return y.isTurboLaunched()},isPhysicalGiftCardExperimentEligible:function(){var b=
0!==w("#giftcardcustomtwister_feature_div").length;b&&(f("Physical Gift Card use case"),a.logCount("turboCheckoutGiftCardUseCase"));return b},setTurboStateNotEligible:function(){B=!0},resolveProductState:function(a){y.resolve(a)},getActiveId:function(){return y.getActiveId()},getRefTag:function(){return y.getRefTag()}}});"use strict";f.when("A","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-aui-page-state-parser",function(d,c){var a=d.$;return{parse:function(b,d){b="script[data-a-state*\x3d'"+
b+"']";d=d?a(d).find(b):a(b);b=[];for(var g=0;g<d.length;g++){var k;a:{try{var l=a(d[g]).text();k=JSON.parse(l);break a}catch(h){c.logError("JSON::parse exception. Exception \x3d "+h,"turbo-checkout-aui-page-state-parser",void 0)}k=void 0}k&&b.push(k)}return b}}});"use strict";f.when("jQuery","turbo-checkout-auto-open","turbo-checkout-page-ready").register("turbo-checkout-page-load-spinner",function(d,c){function a(){0!==d("#turbo-checkout-auto-load-spinner-container").length&&(d("#turbo-checkout-auto-load-spinner-container").remove(),
e.unbind("touchmove touchstart touchend touchcancel click scroll",b))}function b(a){a.preventDefault();a.stopPropagation()}var e=d("body");c.isAutoOpenEligible()&&(e.bind("touchmove touchstart touchend touchcancel click scroll",b),e.append("\x3cdiv id\x3d'turbo-checkout-auto-load-spinner-container' class\x3d'turbo-checkout-auto-load-spinner-container'\x3e\x3cdiv id\x3d'turbo-checkout-auto-load-circle-container' class\x3d'turbo-checkout-auto-load-circle-container'\x3e\x3cdiv id\x3d'turbo-checkout-auto-load-spinner' class\x3d'a-spinner a-spinner-medium turbo-checkout-auto-load-spinner'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"),
setTimeout(a,5E3));return{removePageLoadSpinner:a}});"use strict";f.when("turbo-configuration","turbo-checkout-ref-tagger","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-urls",function(d,c,a){function b(a,b){var c=d.get(d.KEYS.DEVICE_OVERRIDE);return"\x26pipelineType\x3dturbo\x26clientId\x3dretailwebsite"+(c?"\x26devicestring-override\x3d"+c:"")+l(a,b)}function e(a){var b=d.get(d.KEYS.HOST_PAGE_TYPE_IDENTIFIER);return"ref_\x3d"+a+"\x26referrer\x3d"+b}function g(b){return a.isNonEmptyString(b)?
"\x26weblab\x3d"+b:""}function k(){return d.get(d.KEYS.IS_ADD_TO_CART_ENABLED)?"\x26temporaryAddToCart\x3d1":""}function l(b,c){var d="";a.isNonEmptyString(b)&&(d+="\x26pageRequestId\x3d"+b);a.isNonEmptyString(c)&&(d+="\x26pageSessionId\x3d"+c);return d}function h(){return m("auiDebug","auiDebug")+m("ds_user","ds_user")+m("ds_turbo_workspace","ds_workspace")+m("stringDebug","stringDebug")}function m(b,c){var d="";b=a.getUrlQueryParam(b);a.isNonEmptyString(b)&&(d="\x26"+c+"\x3d"+b);return d}return{buildInitiatePathWith:function(a,
c,d,l){return"/checkout/turbo-initiate?"+e(a)+b(d,l)+g(c)+k()+h()},buildEligibilityPathWith:function(a,c,d,l){return"/checkout/turbo-initiate?"+e(a)+b(d,l)+g(c)+"\x26checkEligibilityOnly\x3dtrue"+k()+h()},buildConfirmPathWith:function(a,c,d,h){return"/checkout/turbo-initiate/confirm?"+e(a)+b(d,h)+g(c)+k()},buildLogPageHitPathWith:function(a,d){return"/checkout/log-page-hit?"+c.generateRefTag(a,c.ACTIONS.CLOSE,d)+b()},buildTriggerWeblabPathWith:function(a,b,c,d,k){return"/checkout/triggerWeblab?"+
e(a)+g(b)+"\x26weblabAllocation\x3d"+c+l(d,k)},buildTriggerWeblabPathWithoutWeblab:function(a,b,c){return"/checkout/triggerWeblab?"+e(a)+l(b,c)}}});"use strict";f.when("turbo-checkout-page-ready").register("turbo-callback-list",function(){function d(){var c=[];this.callAll=function(){for(var a=0;a<c.length;a++){var b=c[a];b.apply(b,arguments)}};this.push=function(a){if("function"!==typeof a)throw"Invalid callback. Expected typeof 'callback' to be 'function'. typeof \x3d "+typeof a;-1===c.indexOf(a)&&
c.push(a)};this.remove=function(a){a=c.indexOf(a);-1!==a&&c.splice(a,1)}}return{create:function(){return new d}}});"use strict";f.when("turbo-callback-list","turbo-checkout-page-ready").register("turbo-filtered-callback-list",function(d){function c(a){var b=d.create();this.callAll=b.callAll;this.remove=b.remove;this.push=function(c){(c=c[a])&&"function"===typeof c&&b.push(c)}}return{create:function(a){if(!a||"string"!==typeof a)throw"Invalid filter parameter. Expected 'filter' to be a non empty string. typeof \x3d "+
typeof a+" value \x3d "+a;return new c(a)}}});"use strict";f.when("turbo-configuration","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-form",function(d,c){function a(a){var b=d.get(d.KEYS.FORM_TYPE);if("link"===b)return a.find("a");if("form"===b)return a.closest("form");throw"Unsupported FORM_TYPE is configured. value \x3d "+b;}var b=/[\/?&]ref_?=([^?&]+)/;return{getForms:a,getRefTag:function(d){if(1!==d.length)return c.logError("Expected getRefTag input to have a single element. Cannot resolve refTag as this is a data quality risk",
"turbo-checkout-form"),c.logDebug("turbo-checkout-form","Expected getRefTag input to have a single element. Cannot resolve refTag as this is a data quality risk",d),"";d=a(d);d=((d.attr("action")||d.attr("href")||"")+"\x26"+d.serialize()).match(b)||{};return 2===d.length?d[1]:""}}});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-page-ready").register("turbo-checkout-ajax-wrapper",function(d,c){return{load:function(a,b){b.hasOwnProperty("timeout")||(b.timeout=2E4);return d.ajax(a,b)},
loadWithJQXHR:function(a,b){b.hasOwnProperty("timeout")||(b.timeout=2E4);return d.$.ajax(a,b)},createXHRRequest:function(){var a=new XMLHttpRequest;a.timeout=2E4;return a}}});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-session-storage","turbo-checkout-quantity-input","turbo-checkout-address-id","turbo-checkout-warranty-input","turbo-checkout-accessories-input","turbo-checkout-page-ready").register("turbo-checkout-auto-open",function(d,c,a,b,e,g,k,l){function h(b,
c){a.logDebug("turbo-checkout-auto-open",b,c)}function m(){return q()&&0!==r}function q(){var d;if(d="1"===t.trb_open||"1"===a.getUrlQueryParam("trb_open"))(d=b.isPresent("hasTurboAutoOpened"))&&c.logCount("turboCheckoutAutoOpenLoopPrevented"),d=!d;return d}function f(){return 1===r&&q()}function p(){f()&&(m()&&(r=2,b.set("hasTurboAutoOpened","1")),w(t.trb_bid))}var A=d.$,r=0,u="trb_open trb_addr trb_qty trb_warrAsin trb_auth trb_sid trb_bid trb_accessoryAsin trb_accessoryOffer".split(" "),t={},w=
function(){};return{setup:function(b,c){if(q()){r=1;var e=n.location.href;A.each(u,function(b,c){b=a.getUrlQueryParam(c);t[c]=b;e=a.removeQueryParam(c,b,e)});h("Parameters:",t);a.replaceHistory(e);"function"===typeof b?w=b:a.logError("Initiate action must be supplied, and it must be a function.");d.on("turbo:checkout:prefetcher:state:dataStale",p);c()}else r=0,h("Disabled")},reset:function(){b.remove("hasTurboAutoOpened")},isAutoOpenEligible:q,isAutoOpenEnabled:m,isAutoOpenReadyToBeOpened:f,updateInputsAndThen:function(a){var b=
t.trb_qty,c=t.trb_addr,d=t.trb_warrAsin,h=t.trb_bid,q=t.trb_accessoryAsin,m=t.trb_accessoryOffer;if(b||c||d||h||q||m){b&&e.setQuantity(b);c&&g.set(c);var p;d&&(k.select(d),p=k.getLineItem(b));var f;q&&m&&(l.select(q),f=l.getLineItem());a(b,c,p,h,f)}}}});"use strict";f.when("turbo-checkout-page-ready").register("turbo-checkout-utils",function(){function d(){return navigator.userAgent}function c(a,b){if(a===b||"function"===typeof a&&"function"===typeof b)return!0;if(typeof a!==typeof b)return!1;if("object"!==
typeof a||null===a||null===b)return a===b||a!==a&&b!==b;var d=Object.getOwnPropertyNames(a);if(d.length!==Object.getOwnPropertyNames(b).length)return!1;for(var g=0;g<d.length;g++){var k=d[g];if(!a.hasOwnProperty(k)||!b.hasOwnProperty(k)||!c(a[k],b[k]))return!1}return!0}return{logError:function(a,b){f.log(a,"ERROR",b||"turbo-checkout-utils")},logWarning:function(a,b){f.log(a,"WARN",b||"turbo-checkout-utils")},logDebug:function(){},getUserAgent:d,isAndroid:function(){return!!d().match(/[a|A]ndroid/)},
isIPhone:function(){return!!d().match(/iPhone/)},isIPad:function(){return!!d().match(/iPad/)},isInternetExplorer:function(){return!!d().match(/MSIE/)},createFQDN:function(a){/^http/.test(a)||(a=n.location.origin?n.location.origin+a:n.location.protocol+"//"+n.location.hostname+":"+n.location.port+a);return a},getUrlQueryParam:function(a,b){b||(b=n.location.href);a=a.replace(/[\[\]]/g,"\\$\x26");return(a=(new RegExp("[?\x26]"+a+"(\x3d([^\x26#]*)|\x26|#|$)")).exec(b))?a[2]?decodeURIComponent(a[2].replace(/\+/g,
" ")):"":z},removeQueryParam:function(a,b,c){var d=c;a&&b&&c&&(a=a+"\x3d"+b,d=c.replace(new RegExp("\\?"+a+"[\x26]?","g"),"?"),d=d.replace(new RegExp("[\x26]?"+a,"g"),""));return d},replaceHistory:function(a){n.history.pushState&&n.history.replaceState(null,n.title,a)},isNonEmptyString:function(a){return"string"===typeof a&&0<a.length},isDeepEquals:c}});"use strict";f.when("turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-csm",function(d){function c(a,c,d,e){return"function"===
typeof n.uet?n.uet.apply(n.uet,arguments):e||b()}function a(a,b,c){return"function"===typeof n.ues?n.ues.apply(n.ues,arguments):c}function b(){return+new Date}function e(d){function e(){f&&g&&l&&k&&!r&&"function"===typeof u&&(u(f,g,l,k),r=!0)}var g,k,l,f,r=!1,u;this.getId=function(){return d};this.markClick=function(){f=c("tc",d)};this.markFirstByte=function(){g=a("t0",d,b())};this.markAboveTheFold=function(){l=c("af",d);e()};this.markCriticalFeature=function(){k=c("cf",d);e()};this.whenDataSet=function(a){u=
a;e()}}function g(a){"undefined"!==typeof n.ue_t0&&n.ue.count(a,Date.now()-n.ue_t0)}var k=0,l=[];return{createScope:function(){return new e("chk_turbo_"+ ++k)},logCount:function(a,b){b=b||1;d.logDebug("Logging counter "+a+" with value "+b);if(n.ue&&n.ue.count){var c=a+"_time";n.ue.count(a,b);g(c);for(var e=0;e<l.length;++e)n.ue.count(a+"."+l[e],b),g(c+"."+l[e])}},addCounterExtraSuffix:function(a){l.push(a)},timestamp:b}});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-page-ready").register("turbo-checkout-counter",
function(d,c){var a=0,b=0,e=0,g=0,k=0,l=0,h="u";d.on("turbo:checkout:sheet:beforeOpen",function(){c.logCount("turboCheckoutSheetOpen",a);"u"!==h?(++k,c.logCount("turboCheckoutPrefetchUsed",k),"p"===h?c.logCount("turboCheckoutPrefetchUsedInProgress",k):c.logCount("turboCheckoutPrefetchUsedFull",k)):(++l,c.logCount("turboCheckoutPrefetchMissing",l))});d.on("turbo:checkout:sheet:beforeClose",function(){++b;c.logCount("turboCheckoutSheetClose",b)});d.on("turbo:checkout:prefetcher:state:dataPrefetching",
function(){c.logCount("turboCheckoutPrefetchRequested",e);h="p"});d.on("turbo:checkout:prefetcher:state:dataFresh",function(){++g;c.logCount("turboCheckoutPrefetchAvailable",g);h="a"});d.on("turbo:checkout:prefetcher:state:dataStale",function(){h="u"});return{incrementSheetOpenedCounter:function(){a++},incrementPrefetchCounter:function(){e++},getSheetOpenCount:function(){return a},getPrefetchCount:function(){return e}}});"use strict";f.when("turbo-checkout-page-ready").register("turbo-checkout-cacher",
function(){return{createCache:function(d){var c=!1,a;return function(){c||(a=d(),c=!0);return a}}}});"use strict";f.when("A","turbo-configuration","turbo-checkout-utils","turbo-checkout-counter","turbo-checkout-page-ready").register("turbo-checkout-ref-tagger",function(d,c,a,b){function e(a,c,d){a="chk_"+a+"_"+(c+"_"+b.getPrefetchCount()+"-"+b.getSheetOpenCount());return g(d?a+"_"+d:a)}function g(a){if(!("string"===typeof a&&0<a.length&&64>=a.length&&l.test(a))||h.test(a))throw"Invalid ref tag. This would be filtered and replaced in clickstream. Value \x3d "+
a;return a}var k={ELIGIBILITY:"eligibility",BUY_NOW:"buyNow",CLOSE:"close"},l=/(^[A-z]$|^[A-z][A-z0-9_-]*[A-Za-z0-9]$)/,h=/[_-]{2,}/,f=c.get(c.KEYS.HOST_PAGE_TYPE_IDENTIFIER);return{generateRefTag:function(a,b,c){return"ref_\x3d"+e(a,b,c)},generateValue:e,generateJoinedValue:function(c){if(!c)return e(f,k.BUY_NOW,"fallback");try{var d=c+"_"+(k.BUY_NOW+"_"+b.getPrefetchCount()+"-"+b.getSheetOpenCount());return g(d)}catch(l){return a.logError(l,"turbo-checkout-ref-tagger"),e(f,k.BUY_NOW,"fallback")}},
generateEligibilityValue:function(){return e(f,k.ELIGIBILITY)},ACTIONS:k,TAGS:{TOUCH:"touch",TOUCH_X:"touchX",BACK:"back",ROTATION:"rotation"}}});"use strict";f.when("A","turbo-checkout-page-ready").register("turbo-checkout-prefetch-timer",function(d){function c(){g||(g=!0,d.trigger("turbo:checkout:timer:onTimeout"))}function a(){if(g)return!0;var a=(new Date).getTime();return e?6E5<=a-e:!1}var b,e,g=!1;return{startTimer:function(){b||(b=n.setTimeout(c,6E5));e||(e=(new Date).getTime())},isTimeout:a,
resetTimer:function(){n.clearTimeout(b);g=!1;e=b=null},checkTimeout:function(){a()&&c()}}});"use strict";f.when("A","jQuery","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-state-handler","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-buy-now-button",function(d,c,a,b,e,g){function k(a,c){b.logDebug("turbo-checkout-buy-now-button",a,c)}function l(a){return a?c("#"+a):c(e.getInitiateSelector())}function h(b){k("Buy now button clicked");a.logCount("turboCheckoutBuyNowClicked");
b&&b.currentTarget&&b.currentTarget.id||(k("Click event target is INVALID. Expected event target with an id. Turbo will NOT show",b),t=!0);if(t)t=!1,k("Buy now button callbacks supressed");else{e.resolveProductState(b.currentTarget.id);var d;k("Calling buy now button callbacks...");d=!1;for(var g=0;g<u.length;g++)d=d||u[g]();d?(k("Supressing default buy now button action"),b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),d=!0):d=void 0;if(d)return!1}c(b.currentTarget).closest("form").attr("data-action",
f());a.logCount("turboCheckoutBuyNowDefault");return!0}function f(){return l().attr("name")||"submit.buy-now"}function q(a){for(var b=u.length-1;0<=b;--b)u[b]===a&&u.splice(b,1)}function v(a){if(!a&&1<l().length)throw"Button id parameter is NOT present. Cannot execute action without a button id on a page with multiple buy now buttons!";}function p(a){a=l(a);A(a);a.click()}function A(b){for(var d=g.get(g.KEYS.CONFLICTING_INITIATE_LISTENERS),e=0;e<d.length;e++){var l=d[e];k("Unbound configured event '"+
l+"' from buy now button");a.logCount("turboCheckoutBuyNowButtonConflictingListeners");b.unbind(l);c(document.body).undelegate(b.selector,l)}}var r=g.get(g.KEYS.BUY_NOW_CLICK_EVENT),u=[],t=!1;d.on("turbo:checkout:clickInitiate",p);a.logCount("turboCheckoutBuyNowButtonBound");return{registerOnClickCallback:function(a){q(a);u.push(a)},deregisterOnClickCallback:q,executeOriginalBuyNowAction:function(a){v(a);t=!0;d.trigger("turbo:checkout:buyNowDisabled");d.trigger("turbo:checkout:clickInitiate",a)},
executeTurboBuyNowAction:function(a){v(a);t=!1;p(a)},getSubmitAction:f,bindTurboClickEvent:function(a){a=a||l();a.unbind(r).bind(r,h)},removeConflictingListeners:A,getBuyNowButtons:l}});"use strict";f.when("A","turbo-checkout-utils","turbo-checkout-buy-now-button","turbo-checkout-page-ready").register("turbo-checkout-buy-now-integration",function(d,c,a){function b(a,b){c.logDebug(a,"turbo-checkout-buy-now-integration",b)}var e=d.$,g=[];d.on("turbo:checkout:page:reappear",function(){b("Removing additional form inputs from form",
g);for(var a;(a=g.shift())!==z;)a.remove()});return{isBuyNow:function(b){return b instanceof e&&b.attr("data-action")===a.getSubmitAction()},checkoutWith:function(a,d){if(Array.isArray(a)&&d instanceof e){var h;h=d;for(var f=1;0<h.find('input[name\x3d"asin.'+f+'"]').length||0<h.find('input[name\x3d"offeringID.'+f+'"]').length;)f++;h=f;for(var f=[],q=0;q<a.length;q++){var v=a[q];if(v!==z&&v.asin&&v.offerListingId){var p=h,v=[e("\x3cinput /\x3e",{type:"hidden",name:"asin."+p,value:v.asin}),e("\x3cinput /\x3e",
{type:"hidden",name:"offeringID."+p,value:v.offerListingId}),e("\x3cinput /\x3e",{type:"hidden",name:"quantity."+p,value:v.quantity||1})];Array.prototype.push.apply(f,v);h++}else b('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!',v),c.logError('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!')}q=d.find('input[name\x3d"itemCount"]');1===q.length?q.val(h):d.append(e("\x3cinput /\x3e",
{type:"hidden",name:"itemCount",value:h}));b("Appended additional buy now inputs.",f);d.append.apply(d,f);g=f}else h="Inputs are invalid. Expected array and jQuery object. lineItems \x3d "+a+" $form \x3d "+d,b(h,arguments),c.logError(h)}}});"use strict";f.when("turbo-checkout-page-ready").register("turbo-configuration-keys",function(d){var c={HOST_PAGE_TYPE_IDENTIFIER:"HOST_PAGE_TYPE_IDENTIFIER",FORM_TYPE:"FORM_TYPE",BUY_NOW_BUTTON_SELECTOR:"BUY_NOW_BUTTON_SELECTOR",BUY_NOW_BUTTON_V2_SELECTOR:"BUY_NOW_BUTTON_V2_SELECTOR",
BUY_NOW_CLICK_EVENT:"BUY_NOW_CLICK_EVENT",QUANTITY_SELECT_SELECTOR:"QUANTITY_SELECT_SELECTOR",ADDRESS_INPUT_SELECTORS:"ADDRESS_INPUT_SELECTORS",WARRANTY_CHECKBOX_INPUT_SELECTOR:"WARRANTY_CHECKBOX_INPUT_SELECTOR",WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR:"WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR",WARRANTY_ASIN_INPUT_NAME:"WARRANTY_ASIN_INPUT_NAME",WARRANTY_OFFER_INPUT_SELECTOR:"WARRANTY_OFFER_INPUT_SELECTOR",TURBO_STATE_CHANGE_AUI_EVENTS:"TURBO_STATE_CHANGE_AUI_EVENTS",TWISTER_PAGE_UPDATE_AUI_EVENT:"TWISTER_PAGE_UPDATE_AUI_EVENT",
PREFETCH_TREATMENT:"PREFETCH_TREATMENT",NO_PREFETCH_TREATMENT:"NO_PREFETCH_TREATMENT",BUY_NOW_ONLY_TREATMENT:"BUY_NOW_ONLY_TREATMENT",IS_DEVICE_FILTER_REQUIRED:"IS_DEVICE_FILTER_REQUIRED",IS_SIGN_IN_SUPPORTED:"IS_SIGN_IN_SUPPORTED",USES_MASH_WILL_REAPPEAR:"USES_MASH_WILL_REAPPEAR",SHOW_SIGN_IN_INTERFACE:"SHOW_SIGN_IN_INTERFACE",IFRAME_ID:"IFRAME_ID",EXTEND_ELIGIBLE_STATE:"EXTEND_ELIGIBLE_STATE",VIEW_ADAPTER:"VIEW_ADAPTER",PAGE_STATE_PARSING_ROOT_NODE_SELECTOR:"PAGE_STATE_PARSING_ROOT_NODE_SELECTOR",
PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR:"PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR",TURBO_PAGE_STATE_KEY:"TURBO_PAGE_STATE_KEY",TURBO_PRODUCT_STATE_KEY:"TURBO_PRODUCT_STATE_KEY",DEVICE_OVERRIDE:"DEVICE_OVERRIDE",CONFLICTING_INITIATE_LISTENERS:"CONFLICTING_INITIATE_LISTENERS",VAS_CHANGE_EVENTS:"VAS_CHANGE_EVENTS",VAS_CHECKBOX_SELCTOR:"VAS_CHECKBOX_SELCTOR",CHECKBOX_EXCLUSION_ROOT_NODES:"CHECKBOX_EXCLUSION_ROOT_NODES",MASH_ADAPTER:"MASH_ADAPTER",IS_ADD_TO_CART_ENABLED:"IS_ADD_TO_CART_ENABLED",IS_BUYNOW_ENABLED_FOR_SCREENREADER:"IS_BUYNOW_ENABLED_FOR_SCREENREADER",
BACKGROUND_SCROLL_TARGET_SELECTOR:"BACKGROUND_SCROLL_TARGET_SELECTOR",NO_PREFETCH_EXPERIMENT_WEBLABS:"NO_PREFETCH_EXPERIMENT_WEBLABS",ENABLED_ACCESSORIES_SELECTOR:"ENABLED_ACCESSORIES_SELECTOR",OVERRIDE_ELIGIBILITY:"OVERRIDE_ELIGIBILITY",validate:function(a){if("string"!==typeof a||!c[a])throw"The key '"+a+"' is not defined within 'turbo-configuration-keys'.";}};return c});"use strict";f.when("A","turbo-configuration-keys","turbo-device-configuration","turbo-client-configuration","turbo-eligibility-override",
"turbo-checkout-page-ready").register("turbo-configuration",function(d,c,a,b,e){function g(a,b){var c=k(a);f[a]=c===z?b:c}function k(c){var d=b[c];c=a[c];if(l(d))return d;if(l(c))return c}function l(a){return"boolean"===typeof a||a}function h(c){if(!l(b[c])&&!l(a[c]))throw"Required configuration override for key '"+c+"' is missing";f[c]=k(c)}var f;return{get:function(a){c.validate(a);var b;f||(f={},h(c.HOST_PAGE_TYPE_IDENTIFIER),h(c.SHOW_SIGN_IN_INTERFACE),h(c.EXTEND_ELIGIBLE_STATE),h(c.VIEW_ADAPTER),
g(c.FORM_TYPE,"form"),g(c.BUY_NOW_BUTTON_SELECTOR,"#buy-now-button"),g(c.BUY_NOW_BUTTON_V2_SELECTOR,".cpx-buy-now"),g(c.BUY_NOW_CLICK_EVENT,"click.turboCheckout"),g(c.QUANTITY_SELECT_SELECTOR,'select[name\x3d"quantity"]'),g(c.ADDRESS_INPUT_SELECTORS,["#unifiedLocation1ClickAddress","#unifiedLocationAddress"]),g(c.WARRANTY_CHECKBOX_INPUT_SELECTOR,".mbb-checkbox input[name\x3dmbba]"),g(c.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR,".mbb-checkbox-column"),g(c.WARRANTY_ASIN_INPUT_NAME,"mbba"),g(c.WARRANTY_OFFER_INPUT_SELECTOR,
"#mbb-offering-id"),g(c.TURBO_STATE_CHANGE_AUI_EVENTS,["a:pageUpdate","LocationUX_OnAddressChange"]),g(c.TWISTER_PAGE_UPDATE_AUI_EVENT,"a:pageUpdate"),g(c.PREFETCH_TREATMENT,"PREFETCH_DISABLED"),g(c.NO_PREFETCH_TREATMENT,"T1"),g(c.BUY_NOW_ONLY_TREATMENT,"BUY_NOW_LAUNCHED"),g(c.IS_DEVICE_FILTER_REQUIRED,!1),g(c.IS_SIGN_IN_SUPPORTED,!0),g(c.USES_MASH_WILL_REAPPEAR,!1),g(c.IFRAME_ID,"turbo-checkout-iframe"),g(c.PAGE_STATE_PARSING_ROOT_NODE_SELECTOR,"#turboState"),g(c.PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR,
"#turboState"),g(c.TURBO_PAGE_STATE_KEY,"turbo-checkout-page-state"),g(c.TURBO_PRODUCT_STATE_KEY,"turbo-checkout-page-state"),g(c.DEVICE_OVERRIDE,""),g(c.CONFLICTING_INITIATE_LISTENERS,[]),g(c.CHECKBOX_EXCLUSION_ROOT_NODES,"#simpleBundle_feature_div #monthlyPayments_feature_div #bbg_feature_div #addons_feature_div #mobile-accessory-upsell #detailPageGifting_feature_div".split(" ")),g(c.ENABLED_ACCESSORIES_SELECTOR,".simpleBundleCheckBoxArea"),g(c.MASH_ADAPTER,""),g(c.IS_ADD_TO_CART_ENABLED,!0),g(c.IS_BUYNOW_ENABLED_FOR_SCREENREADER,
!0),g(c.BACKGROUND_SCROLL_TARGET_SELECTOR,"#productTitleGroupAnchor"),g(c.VAS_CHANGE_EVENTS,["turbo:checkout:sheet:doClose"]),g(c.VAS_CHECKBOX_SELCTOR,"#vas-checkbox-input"),g(c.VAS_CHANGE_EVENTS,["turbo:checkout:sheet:doClose"]),g(c.VAS_CHECKBOX_SELCTOR,"#vas-checkbox-input"),g(c.NO_PREFETCH_EXPERIMENT_WEBLABS,["RCX_CHECKOUT_TURBO_PRIME_UPSELL_222066"]),g(c.OVERRIDE_ELIGIBILITY,e));b=f;return b[a]},KEYS:d.copy(c)}});"use strict";f.when("turbo-checkout-utils","turbo-checkout-weblab-allocation","turbo-checkout-state-handler",
"turbo-checkbox-exclusion-listener","turbo-checkout-content-loader","turbo-checkout-device-filter","turbo-callback-list","turbo-checkout-auto-open","turbo-checkout-vas-input","turbo-checkout-accessories-input","turbo-checkout-page-ready").register("turbo-base-eligible-state",function(d,c,a,b,e,g,k,f,h,m){function q(){w=!0}function n(){w=!1}function p(){var d=new A;g.isDeviceTurboEligible()||d.invalidate("Device is NOT eligible");e.isError()&&!c.isNoPrefetch()&&d.invalidate("Prefetch failed");a.isProductTurboEligible()||
d.invalidate("Product is NOT eligible");f.isAutoOpenEnabled()||w||d.invalidate("Cheetah eligibility response is false");c.isControl()&&d.invalidate("Weblab is in CONTROL");c.isBuyNowOnly()&&d.invalidate("Weblab is in buy now only treatment");h.isSelected()&&d.invalidate("Value added service is selected and NOT supported");m.isEligible()||d.invalidate("Accessory selection was not eligible");b.isAnyCheckboxChecked()&&d.invalidate("Exclusion case checkbox is checked");u.callAll(d);d.logInvalidState();
return d.canShow()}function A(){var a=!0,b=[];this.invalidate=function(c){a=!1;b.push(c)};this.logInvalidState=function(){a||d.logDebug("turbo-base-eligible-state","Cannot show turbo because: "+b)};this.canShow=function(){return a}}function r(a){t.callAll(p(),a)}var u=k.create(),t=k.create(),w=!1;return{addStateCheck:function(a){u.push(a)},canShow:p,registerStateChangeCallback:function(a){t.push(a)},onStateChange:r,setup:function(){e.registerCallback({onTurboEligible:q,onFinish:q,onTurboIneligible:n});
a.registerCallback(r);b.onStateChange(r);h.onChange(r);m.registerCallback(r)}}});"use strict";f.when("A","turbo-callback-list","turbo-checkout-page-ready").register("turbo-checkout-base-view",function(d,c){function a(a){if("string"!==typeof a)throw"Parameter 'iFrameContainerSelector' is not a string.";this.onBoundsAdjustedCallbacks=c.create();this.IFRAME_CONTAINER_SELECTOR=a}var b=d.$;a.prototype.updateBounds=function(a,b){if("number"!==typeof a)throw'Parameter "iFrameContainerHeightInPixels" is not a number. Cannot validate bounds.';
var c=this.$getIFrameContainer().height(),d=a-c,f=c+d;0!==d&&(this.$getIFrameContainer().height(f),b&&a!==b?(this.$getIFrame().height(b),this.$getIFrameContainer().css("overflow-y","scroll"),this.$getIFrameContainer().css("-webkit-overflow-scrolling","touch")):(this.$getIFrame().height("100%"),this.$getIFrameContainer().css("overflow-y",""),this.$getIFrameContainer().css("-webkit-overflow-scrolling","")),a=parseInt(this.$getIFrameContainer().css("min-height"),10),f=f>a?f:a,c!==f&&this.onBoundsAdjustedCallbacks.callAll(f))};
a.prototype.$getIFrameContainer=function(){return b(this.IFRAME_CONTAINER_SELECTOR)};a.prototype.$getIFrame=function(){return b(this.IFRAME_CONTAINER_SELECTOR+" iframe")};a.prototype.pushBoundsAdjustedCallback=function(a){this.onBoundsAdjustedCallbacks.push(a)};return{extend:function(){function b(){a.apply(this,arguments)}b.prototype=Object.create(a.prototype);return b.prototype.constructor=b}}});"use strict";f.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-eligible-state-check",
function(d){d.get(d.KEYS.EXTEND_ELIGIBLE_STATE)||f.when("turbo-base-eligible-state").register("turbo-checkout-eligible-state",function(c){return{canShow:c.canShow,registerStateChangeCallback:c.registerStateChangeCallback,setup:c.setup}})});"use strict";f.when("A","turbo-checkout-state-handler","turbo-configuration","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-weblab-allocation",function(d,c,a){function b(){return c.getWeblabAllocation()}function e(){return c.getExperimentName()}
function g(){return"C"===b()}function k(){var b=a.get(a.KEYS.NO_PREFETCH_EXPERIMENT_WEBLABS);return Array.isArray(b)&&-1!==b.indexOf(e())&&!g()}return{getAllocation:b,getExperimentName:e,isControl:g,isBuyNowOnly:function(){return b()===a.get(a.KEYS.BUY_NOW_ONLY_TREATMENT)},isPrefetch:function(){return!k()&&b()===a.get(a.KEYS.PREFETCH_TREATMENT)},isNoPrefetch:function(){var c=a.get(a.KEYS.NO_PREFETCH_TREATMENT);return k()||!!b().match(c)}}});"use strict";f.when("A","jQuery","turbo-checkout-ajax-wrapper",
"turbo-checkout-utils","turbo-checkout-urls","turbo-checkout-csm","turbo-checkout-weblab-allocation","turbo-checkout-buy-now-button","turbo-configuration","turbo-checkout-state-handler","turbo-checkout-eligibility-response-weblabs","turbo-checkout-page-ready").register("turbo-checkout-weblab-trigger",function(d,c,a,b,e,g,k,f,h,m,q){function v(){d.on("turbo:checkout:prefetch:onTurboEligible",function(){C=!0;r()})}function p(){d.on("turbo:checkout:prefetch:onTurboIneligible",function(){C=!1;r()})}function A(){d.on("a:pageUpdate",
function(){r()})}function r(){0===u().length?g.logCount("turboCheckoutBuyNowButtonMissing"):0===t().length&&g.logCount("turboCheckoutBuyNowFormMissing");0<t().length&&(C?(b.logDebug("turbo-checkout-weblab-trigger","Adding trigger to form: "+k.getAllocation()),z.val(k.getAllocation()),y.val(k.getExperimentName()),B.val(m.getRequestId()),E.val(m.getSessionId()),t().append(z,y,B,E)):(b.logDebug("turbo-checkout-weblab-trigger","Removing trigger from form: "+k.getAllocation()),z.remove(),y.remove(),B.remove(),
E.remove()))}function u(){var a=h.get(h.KEYS.BUY_NOW_BUTTON_SELECTOR),b=h.get(h.KEYS.BUY_NOW_BUTTON_V2_SELECTOR);return 0===c(a).length?c(b):c(a)}function t(){return u().closest("form")}function w(){if(q.get()&&0<q.get().length||C&&!m.isTurboLaunched()){b.logDebug("turbo-checkout-weblab-trigger","Calling cheetah to trigger: "+k.getAllocation());0<t().find(z).length||g.logCount("turboCheckoutTriggerMissing");var a=m.getRefTag(),d=k.getExperimentName(),f=k.getAllocation(),h=q.get(),a=!C||m.isTurboLaunched()?
e.buildTriggerWeblabPathWithoutWeblab(a,m.getRequestId(),m.getSessionId()):e.buildTriggerWeblabPathWith(a,d,f,m.getRequestId(),m.getSessionId()),h={additionalWeblabsToTrigger:JSON.stringify(h)},d="function"===typeof n.Blob;"function"===typeof n.navigator.sendBeacon&&d?(h=new Blob([c.param(h)],{type:"application/x-www-form-urlencoded"}),n.navigator.sendBeacon(a,h)||g.logCount("turboCheckoutTriggerRecordingFailed")):x(a,h)}}function x(b,c){a.load(b,{method:"POST",params:c,error:function(a,b,c){a&&204===
a.http.status||g.logCount("turboCheckoutTriggerRecordingFailed")},abort:function(a){g.logCount("turboCheckoutTriggerRecordingFailed")}})}var z,y,B,E,C=!1;return{setup:function(){z=c("\x3cinput/\x3e",{type:"hidden",name:"triggerTurboWeblab",value:""});y=c("\x3cinput/\x3e",{type:"hidden",name:"triggerTurboWeblabName",value:""});B=c("\x3cinput/\x3e",{type:"hidden",name:"turboPageRequestId",value:""});E=c("\x3cinput/\x3e",{type:"hidden",name:"turboPageSessionId",value:""});A();v();p();f.registerOnClickCallback(w)}}});
"use strict";f.when("A","turbo-checkout-form","turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-page-ready").register("turbo-checkout-page-filter",function(d,c,a,b){function e(b,c){a.logDebug("turbo-checkout-page-filter",b,c)}return{isCurrentViewTurboEligible:function(){var a=d.$(b.getInitiateSelector()),f=c.getForms(a),l=0<a.length&&a.length===f.length;l||(e("Page is NOT turbo eligible. Parent forms / nested links do not match the number of initiate selectors",a),e("Forms",f));
return l}}});"use strict";f.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-device-filter-check",function(d){d.get(d.KEYS.IS_DEVICE_FILTER_REQUIRED)||f.when("turbo-checkout-cacher","turbo-checkout-page-ready").register("turbo-checkout-device-filter",function(c){var a=function(){return!0};return{isDeviceTurboEligible:c.createCache(a),isSignInSupported:c.createCache(a)}})});"use strict";f.when("A","turbo-checkout-state-handler","turbo-checkout-device-filter","turbo-checkout-page-filter",
"turbo-checkout-weblab-allocation","turbo-checkout-page-ready").register("turbo-checkout-eligibility-aggregator",function(d,c,a,b,e){return{isTurboEligible:function(){return b.isCurrentViewTurboEligible()&&c.isProductTurboEligible()&&!e.isBuyNowOnly()},isSignInSupported:function(){return a.isSignInSupported()&&!e.isBuyNowOnly()},shouldAttemptPrefetch:function(){return a.isDeviceTurboEligible()&&!e.isBuyNowOnly()}}});"use strict";f.when("A","turbo-checkout-ref-tagger","turbo-filtered-callback-list",
"turbo-checkout-state-handler","turbo-checkout-ajax-wrapper","turbo-checkout-utils","turbo-checkout-urls","turbo-checkout-csm","turbo-checkout-eligibility-aggregator","turbo-checkout-eligibility-response-weblabs","turbo-checkout-accessories-input","turbo-checkout-page-ready").register("turbo-checkout-content-loader",function(d,c,a,b,e,g,f,l,h,m,q){function v(a){l.logCount("turboCheckoutInitiate");E();L=!1;K=Date.now();u("Notifying loading callbacks");D="started";O.callAll();d.trigger("turbo:checkout:prefetch:onStart");
l.logCount("turboCheckoutPrefetchStart");var g=a?c.generateEligibilityValue():b.getRefTag(),g=(a?f.buildEligibilityPathWith:f.buildInitiatePathWith)(g,b.getExperimentName(),b.getRequestId(),b.getSessionId());H=e.loadWithJQXHR(g,{type:"POST",data:p(a),headers:A(),xhr:r,success:x,error:X})}function p(a){var c={isAsync:1};b.getAddressId()&&(c.addressID=b.getAddressId());b.isPhysicalGiftCardExperimentEligible()&&(c.isPhysicalGiftCard=b.isPhysicalGiftCardExperimentEligible());if(a&&q.isEligible()&&q.getLineItem()){var d=
q.getLineItem();c["asin.1"]=d.asin;c["offerListing.1"]=d.offerListingId;c["requiresEligibilityCheck.1"]="true"}a||b.getLineItems().forEach(function(a,b){b+=1;c["asin."+b]=a.asin;c["offerListing."+b]=a.offerListingId;c["quantity."+b]=a.quantity;a.customItemPrice&&(c["customItemPrice."+b]=a.customItemPrice,c.customItemPrice=a.customItemPrice);var d=a.addToCartTimeAsUnixEpochMilliseconds;d&&(c["addToCartTimeAsUnixEpochMilliseconds."+b]=d);(a=a.addToCartSessionId)&&(c["addToCartSessionId."+b]=a)});return c}
function A(){var a={"x-amz-support-custom-signin":1};a["x-amz-turbo-checkout-dp-url"]=n.location.href;a["x-amz-checkout-entry-referer-url"]=n.location.href;return a}function r(){var a=e.createXHRRequest();a.addEventListener("readystatechange",function(){if(L||!a.readyState||2>a.readyState)u("Ignoring ready state changed event because headers already received or missing xhr");else if(L=!0,l.logCount("turboCheckoutPrefetchHeadersReceived"),l.logCount("turboCheckoutPrefetchHeadersReceivedDuration",Date.now()-
K),y(a)){u("Headers received: Turbo eligible");l.logCount("turboCheckoutTurboEligibleAfterCheetahChecks");var b=t(a),c=h.isSignInSupported();b&&(u("Headers received: Signin required"),l.logCount("turboCheckoutSigninRequired"),c||(u("Sign-in required but it is disabled or not supported."),l.logCount("turboCheckoutSigninNotSupported")));if(c||!b)u("Notifying turbo eligible callbacks"),I.callAll(),d.trigger("turbo:checkout:prefetch:onTurboEligible");w(a)&&P.callAll(a.getResponseHeader("x-amzn-checkout-login-provider"))}else u("Headers received: Not turbo eligible"),
Q.callAll(),d.trigger("turbo:checkout:prefetch:onTurboIneligible")});return a}function u(a,b){g.logDebug("turbo-checkout-content-loader",a,b)}function t(a){return a&&a.getResponseHeader("x-amzn-checkout-login-required")}function w(a){return h.isSignInSupported()&&t(a)}function x(a,b,c){l.logCount("turboCheckoutPrefetchEnd",Date.now()-K);H=null;b=y(c);var e,f=a&&a.match(C);if(f&&0<f.length)try{var k=F(f[0]);e=F.parseJSON(k.text())}catch(h){g.logError("Could not extract page state from cheetah page: "+
h)}else u("Could not extract page state from response data");var k=e&&"turbo"===e.pipelineType,f=e&&e.currentPurchaseId&&0<String(e.currentPurchaseId).trim().length,p=c.getResponseHeader("x-amzn-experiment-weblabs-to-trigger");if(p!==z){var r=[];try{r=JSON.parse(p)}catch(h){console.error("Error parsing additional weblabs from xhr response header: ",h)}m.set(r)}k&&!f&&g.logError("No purchaseid provided, cannot show turbo");b&&k&&f?("started"!==D&&g.logError("turbo-checkout-content-loader","Error processing turbo available callbacks. Expected state to be started but was "+
D),u("Notifying turbo available callbacks"),D="success",R.callAll(a,e),d.trigger("turbo:checkout:prefetch:onSuccess"),l.logCount("turboCheckoutTurboPrefetchSuccess")):b&&w(c)?u("Body received: Eligible and sign-in is supported and required."):(u("Body received: No turbo page or not eligible: isTurboEligible: "+b+" isTurboPage: "+k+" hasPurchaseId: "+f),B(),l.logCount("turboCheckoutTurboPrefetchFail"))}function X(a,b,c){l.logCount("turboCheckoutPrefetchEnd");H=null;u("Error while initiate",c);l.logCount("turboCheckoutTurboPrefetchError");
"timeout"===b&&l.logCount("turboCheckoutInitiateTimeOut");B()}function y(a){return a&&a.getResponseHeader("x-amz-turbo-checkout-eligible")}function B(){"started"!==D&&g.logError("turbo-checkout-content-loader","Error processing turbo not available callbacks. Expected state to be started but was "+D);u("Notifying error callbacks");D="error";N.callAll();d.trigger("turbo:checkout:prefetch:onError")}function E(){H&&H.abort&&(u("Aborting running request..."),H.abort())}var C=/<script.*data-a-state.*checkout:conductor:page.*>.*<\/script>/,
F=d.$,H,D="stopped",K,L=!1,O=a.create("onStart"),R=a.create("onFinish"),N=a.create("onError"),I=a.create("onTurboEligible"),Q=a.create("onTurboIneligible"),P=a.create("onSigninRequired");d.on("turbo:checkout:signInController:onDoSignIn",B);return{registerCallback:function(a){O.push(a);R.push(a);N.push(a);I.push(a);P.push(a);Q.push(a)},callInitiate:function(){u("Calling turbo initiate");v()},checkEligibility:function(){u("Calling turbo eligibility check only");v(!0)},abortCall:E,isSuccess:function(){return"success"===
D},isError:function(){return"error"===D},isStarted:function(){return"started"===D}}});"use strict";f.when("A","jQuery","turbo-checkout-ref-tagger","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-history-manager",function(d,c,a,b){function e(){if(n.history.state&&n.history.state.turboAction)return n.history.state.turboAction}c(n).bind("popstate.turbo",function(c){e();e()?(b.logDebug("turbo-checkout-history-manager","Trigger sheet open"),d.trigger("turbo:checkout:sheet:doOpen")):
(b.logDebug("turbo-checkout-history-manager","Trigger sheet close"),d.trigger("turbo:checkout:sheet:doClose",{immediate:!1,reason:a.TAGS.BACK}))});return{sheetOpened:function(){e();e()||(b.logDebug("turbo-checkout-history-manager","Adding turbo history state"),n.history.pushState({turboAction:"popover"},document.title+" Turbo open"))},sheetClosed:function(){e();e()&&(b.logDebug("turbo-checkout-history-manager","Removing turbo history state"),n.history.back())}}});"use strict";f.when("A","turbo-checkout-page-ready").register("turbo-base-visibility-manager",
function(d){function c(){d.trigger("turbo:checkout:page:gone")}return{setup:function(){d.on("turbo:checkout:sheet:onNavigateAway",c)}}});f.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-mash-will-reappear-check",function(d){d.get(d.KEYS.USES_MASH_WILL_REAPPEAR)||f.when("turbo-base-visibility-manager").register("turbo-checkout-page-visibility-manager",function(c){return c})});"use strict";f.when("A","jQuery","turbo-checkout-view-state","turbo-checkout-weblab-allocation","turbo-checkout-state-handler",
"turbo-checkout-content-loader","turbo-checkout-prefetch-timer","turbo-checkout-page-visibility-manager","turbo-checkout-counter","turbo-checkout-utils","turbo-checkout-eligibility-aggregator","turbo-checkout-auto-open","turbo-checkout-page-ready").register("turbo-checkout-prefetcher",function(d,c,a,b,e,g,f,l,h,m,q,n){function p(a){var b=r;r=a;m.logDebug("turbo-checkout-prefetcher","Transitioning from "+b.name+" to "+a.name);if(b.onExit)b.onExit(a.name);if(a.onEnter)a.onEnter(b.name);d.trigger("turbo:checkout:prefetcher:state:"+
a.name);d.trigger("turbo:checkout:prefetcher:state",a.name)}var A,r,u=function(){var a=g.isError(),b=!q.isTurboEligible(),c=f.isTimeout(),d=0===A;m.logDebug("turbo-checkout-prefetcher","Test is data stale: isStaleWhenCheetahReturnsError: "+a+" isStaleWhenProductNotEligiblie: "+b+" isStaleWhenTimeoutOccurs: "+c+" isStaleWhenNoMorePrefetchesAvailable: "+d);return a||b||c||d},t=function(){var a=q.isTurboEligible()&&!f.isTimeout()&&0<A;m.logDebug("turbo-checkout-prefetcher","Test should prefetch: eligibilityAggregator.isTurboEligible(): "+
q.isTurboEligible()+" !timer.isTimeout(): "+!f.isTimeout()+" _prefetchesAvailable: "+A);return a},w={name:"start",onEvent:function(a){q.shouldAttemptPrefetch()?"controller:onPageLoaded"===a&&p(x):p(B)},onExit:function(){e.startMonitoringPage()}},x={name:"dataStale",onEvent:function(a){"page:gone"!==a&&"prefetch:onError"!==a&&"sheet:afterClose"!==a&&t()&&p(z)}},z={name:"dataPrefetching",onEnter:function(){h.incrementPrefetchCounter();b.isPrefetch()||a.isOpeningOrOpen()||n.isAutoOpenReadyToBeOpened()?
g.callInitiate():g.checkEligibility();--A},onEvent:function(a){if("page:gone"===a)p(x);else{var c=g.isSuccess()&&b.isPrefetch(),d=g.isSuccess()&&b.isNoPrefetch();m.logDebug("turbo-checkout-prefetcher","Test is data fresh: isFreshWhenPrefetchResultOKInT1: "+c+" isFreshWhenPrefetchResultOKInT4: "+d);c||d?p(y):u()?p(x):"product:onChange"===a&&t()&&p(z)}},onExit:function(a){"dataFresh"!==a&&g.abortCall()}},y={name:"dataFresh",onEnter:function(){f.startTimer()},onEvent:function(b){"page:gone"===b?p(x):
u()?p(x):(a.isClosed()||"product:onChange"===b)&&t()&&p(z)},onExit:function(){f.resetTimer()}},B={name:"end"},E="controller:onPageLoaded sheet:beforeOpen sheet:afterClose product:onChange prefetch:onSuccess prefetch:onError timer:onTimeout page:gone page:reappear".split(" "),C={"sheet:beforeOpen":function(){A=10}};return{setup:function(){A=10;r=w;c.each(E,function(a,b){var c=C[b];d.on("turbo:checkout:"+b,function(a){m.logDebug("turbo-checkout-prefetcher","Processing "+b);c&&c();if(r.onEvent)r.onEvent(b)})})},
getState:function(){return r.name}}});"use strict";f.when("A","turbo-signin-adapter","turbo-checkout-content-loader","turbo-checkout-buy-now-button","turbo-checkout-csm","turbo-checkout-weblab-allocation","turbo-checkout-utils","turbo-callback-list","turbo-checkout-state-handler","turbo-checkout-eligible-state","turbo-checkout-page-ready").register("turbo-checkout-signin-controller",function(d,c,a,b,e,g,f,l,h,m){function q(){t=!1}function n(a){t=!0;w=a;e.logCount("turboCheckoutSigninRequired")}function p(){var a=
t&&m.canShow();a&&(f.logDebug("turbo-checkout-signin-controller","Showing sign in dialog"),e.logCount("turboCheckoutSigninPopup"),c.show(w,A,r),d.trigger("turbo:checkout:signInController:onDoSignIn"));return a}function A(){f.logDebug("turbo-checkout-signin-controller","Signin success");e.logCount("turboCheckoutSigninSuccess");u.callAll()}function r(){f.logDebug("turbo-checkout-signin-controller","Signin failed");e.logCount("turboCheckoutSigninFailed")}var u=l.create(),t=!1,w;return{setup:function(){a.registerCallback({onStart:q,
onSigninRequired:n});b.registerOnClickCallback(p)},registerCallback:u.push}});"use strict";f.when("A","turbo-configuration","turbo-callback-list","turbo-filtered-callback-list","turbo-checkout-page-ready").register("turbo-checkout-iframe",function(d,c,a,b){function e(){return d.$("#"+m)}function g(){if(!(0<e().length))throw"Attempted to read / write the iFrame without it being in the DOM. This would result in an undefined iFrame document.";var a=e()[0];return a.contentDocument||a.contentWindow.document}
function f(){if(0<e().length)throw"Attempted to insert multiple Turbo Checkout iFrames";}function l(){return d.$("\x3ciframe/\x3e",{id:m,src:"about:blank",scrolling:"no","class":"turbo-checkout-blank"})}function h(a){p.push(a)}var m=c.get(c.KEYS.IFRAME_ID),q=b.create("beforeFramePopulated"),n=b.create("afterFramePopulated"),p=a.create();h(function(a){a.addClass("turbo-checkout-shown")});d.on("turbo:checkout:iframe:document:loaded",function(){p.callAll(e())});return{write:function(a){q.callAll();a+=
'\x3cscript\x3e"use strict";window.parent.P.now("turbo-checkout-controller").execute("callbackPageController", function callbackPageController(controller) {controller.frameHtmlRendered();});P.when("load").execute("onTurboDocumentLoaded", function onTurboDocumentLoaded() {window.parent.P.when("A").execute("triggerTurboDocumentLoaded", function triggerTurboDocumentLoaded(A) {A.trigger("turbo:checkout:iframe:document:loaded");});});\x3c/script\x3e';if("string"!==typeof a)throw"Attempted to write non-string value to iFrame. typeof \x3d "+
typeof a;var b=g();b.open();b.write(a);b.close();n.callAll(e()[0])},remove:function(){e().remove()},appendTo:function(a){f();a.append(l())},insertInto:function(a){f();a.html(l())},hasContent:function(){var a=0<e().length&&g();return a&&(a.body.hasChildNodes()||a.head.hasChildNodes())},registerCallbacks:function(a){q.push(a);n.push(a)},onContentLoaded:h}});"use strict";f.when("A","turbo-checkout-page-ready").register("turbo-checkout-view-state",function(d){function c(a,b){return function(){return e===
a||e===b}}function a(a){return function(){e=a;b.apply(b,arguments)}}function b(a,b){a&&"string"===typeof a&&d.trigger(a,b)}var e=0;return{isClosed:c(0),isClosing:c(1),isOpen:c(2),isOpening:c(3),isClosingOrClosed:c(1,0),isOpeningOrOpen:c(3,2),setToOpen:a(2),setToOpening:a(3),setToClosed:a(0),setToClosing:a(1)}});"use strict";f.when("A","turbo-view-adapter","turbo-checkout-view-state","turbo-checkout-eligible-state","turbo-checkout-content-loader","turbo-checkout-utils","turbo-checkout-weblab-allocation",
"turbo-checkout-weblab-trigger","turbo-checkout-csm","turbo-checkout-state-handler","turbo-checkout-device-filter","turbo-checkout-ajax-wrapper","turbo-checkout-page-visibility-manager","turbo-checkout-counter","turbo-checkout-prefetcher","turbo-checkout-prefetch-timer","turbo-checkout-buy-now-button","turbo-checkout-signin-controller","turbo-checkout-auto-open","turbo-checkout-urls","turbo-checkout-ref-tagger","turbo-configuration","turbo-checkout-event-verification","turbo-checkout-page-ready").register("turbo-checkout-controller",
function(d,c,a,b,e,g,f,l,h,m,q,n,p,A,r,u,t,w,x,z,y,B,E){function C(){t.bindTurboClickEvent()}function F(a,b){g.logDebug("turbo-checkout-controller",a,b)}function H(a,b){I();a||c.close({reason:b})}function D(){F("Handling signin success");L()}function K(){F("Handling buy now button click");L();return!0}function L(){W=setTimeout(O,2E4);J=h.createScope();J.markClick();M="loading";S=!1;u.checkTimeout();A.incrementSheetOpenedCounter();c.show()}function O(){h.logCount("turboCheckoutContenLoadTimeout")}
function R(){I();c.removeContent()}function N(){I();E.logBuyNowButtonClickHandlerMetrics()}function I(){b.canShow()?(F("Registering with buy now button"),d.trigger("turbo:checkout:buyNowEnabled"),t.registerOnClickCallback(K)):(F("Unregistering from buy now button"),d.trigger("turbo:checkout:buyNowDisabled"),t.deregisterOnClickCallback(K))}function Q(a,b){h.logCount("turboCheckoutPrefetchSuccess");a&&(f.isControl()||f.isBuyNowOnly())&&(F("Received content in control: "+a.substring(0,255)),h.logCount("turboCheckoutControlContentReceived"));
T=b;c.setContent(a);I()}function P(){I();a.isOpeningOrOpen()&&(h.logCount("turboCheckoutYieldNewPurchase"),c.closeImmediatelyThenExecute(U))}function Y(){clearTimeout(W);M="unknown";!G||G.isResolved()||G.isRejected()||(F("Initiate confirm called for "+T.currentPurchaseId+" with existing confirm still executing. Aborting"),h.logCount("turboCheckoutConfirmPending"),G._supersedByNewPurchase=!0,G.abort());Z()}function Z(){h.logCount("turboCheckoutConfirm");var a=T.currentPurchaseId,b=z.buildConfirmPathWith(m.getRefTag(),
f.getExperimentName(),m.getRequestId(),m.getSessionId());G=n.loadWithJQXHR(b,{type:"POST",data:{pid:a,isInitiateLoggingFixEnabled:1},success:function(a,b,c){h.logCount("turboCheckoutConfirmSuccess")},error:function(b,d,e){"abort"===d?h.logCount("turboCheckoutConfirmAborted"):("timeout"===d&&h.logCount("turboCheckoutConfirmTimeOut"),h.logCount("turboCheckoutConfirmFailed"));b._supersedByNewPurchase||(g.logError("Issue confirming turbo initiate prefetch for pid "+a+": "+e+", "+d),h.logCount("turboCheckoutYieldNewPurchase"),
c.closeImmediatelyThenExecute(U))}})}function aa(){J.markFirstByte()}function U(){t.executeOriginalBuyNowAction(m.getActiveId())}function ba(a){d.trigger("turbo:checkout:embedded:page:showSpinner");G.done(a)}function ca(a,b,c){M=c;S=!1}function da(){S=!0}function ea(a){a&&a.doNotLog||(a&&!a.doNotLog?V(M,a.reason):V(M,!1));M="closed"}function V(a,b){var c=z.buildLogPageHitPathWith(S?a+"2":a,b);F("Logging page hit from "+a+" to "+B.get(B.KEYS.HOST_PAGE_TYPE_IDENTIFIER)+" reason "+b);n.load(c,{method:"POST",
params:{pageType:B.get(B.KEYS.HOST_PAGE_TYPE_IDENTIFIER),referrer:a},timeout:4E3})}function fa(){a.isOpeningOrOpen()&&h.logCount("turboCheckoutProductChangedWhileOpening")}var J,M,T,S,W,G;d.on("a:pageUpdate",C);C();return{pageLoaded:function(){var a=f.getExperimentName();if(a){var g=f.getAllocation();h.addCounterExtraSuffix("wl:"+g);h.addCounterExtraSuffix(a+":"+g)}q.isDeviceTurboEligible()&&(b.setup(),b.registerStateChangeCallback(H),p.setup(),e.registerCallback({onStart:R,onTurboEligible:N,onFinish:Q,
onError:P}),l.setup(),w.setup(),w.registerCallback(D),J=h.createScope(),c.registerCallbacks({beforeFramePopulated:Y,afterFramePopulated:aa}),m.registerCallback(fa),d.on("turbo:checkout:sheet:beforeClose",ea),d.on("turbo:checkout:embedded:page:beforeReload",ca),d.on("turbo:checkout:embedded:page:animation:start",da),x.setup(t.executeTurboBuyNowAction,N),r.setup(),d.trigger("turbo:checkout:controller:onPageLoaded"))},loadFullscreen:function(a,b){function d(){a=g.createFQDN(a);"thankyou"===b?(h.logCount("turboCheckoutYieldTYP"),
c.closeAndNavigate(a)):(h.logCount("turboCheckoutYield"),c.closeToFullscreen(a))}!G||G.isResolved()||G.isRejected()?d():(h.logCount("turboCheckoutWaitYield"),ba(d))},frameContentReady:function(a,b,c){d.trigger("turbo:checkout:embedded:page:ready",a,b);(function(){var a=function(){J.markCriticalFeature();c.confirmHit(B.get(B.KEYS.HOST_PAGE_TYPE_IDENTIFIER),m.getRefTag());J.whenDataSet(c.recordClientSideMetrics);b.off("checkout:afterReload",a)};b.on("checkout:afterReload",a)})();(function(){b.on("checkout:beforeReload",
function(c){d.trigger("turbo:checkout:embedded:page:beforeReload",a,b,c)});b.on("checkout:reload",function(c){d.trigger("turbo:checkout:embedded:page:reload",a,b,c)});b.on("checkout:afterReload",function(c){d.trigger("turbo:checkout:embedded:page:afterReload",a,b,c)});b.on("turbo:checkout:animation:start",function(){d.trigger("turbo:checkout:embedded:page:animation:start")});d.on("turbo:checkout:embedded:page:showSpinner",function(){c.showSpinner()})})()},frameHtmlRendered:function(){J.markAboveTheFold()},
updateBounds:function(a,b){c.updateBounds(a,b)}}});"use strict";f.when("turbo-checkout-page-load-spinner","turbo-checkout-controller","turbo-checkout-csm","turbo-checkout-page-ready").register("turbo-checkout-startup",function(d,c,a){d.removePageLoadSpinner();a.logCount("turboCheckoutControllerPageLoaded");c.pageLoaded()});"use strict";f.when("turbo-checkout-assets-load-trigger").register("turbo-checkout-page-ready",function(){n.ue&&n.ue.count&&"undefined"!==typeof n.ue_t0&&n.ue.count("turboCheckoutPageReady",
Date.now()-n.ue_t0)});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-quantity-input","turbo-checkout-warranty-input","turbo-checkout-accessories-input","turbo-checkout-page-ready").register("turbo-checkout-authportal-return-query",function(d,c,a,b,e,f,k){function l(b){a.logDebug("turbo-checkout-authportal-return-query",b)}function h(a){return!!a.match("trb_auth\x3d1")}function m(d){if(h(d)){d=((d||"").match(p)||[])[1]||"";var e=b.getSessionId();
a.isNonEmptyString(d)||c.logCount("turboCheckoutPostAuthEmptySessionParameter");a.isNonEmptyString(e)||c.logCount("turboCheckoutPostAuthEmptySessionPageState");a.isNonEmptyString(d)&&a.isNonEmptyString(e)&&d!==e&&(a.logWarning("Turbo Session Flip Detected. Post authentication sessionId \x3d "+e+", Expected \x3d "+d,"turbo-checkout-authportal-return-query"),c.logCount("turboCheckoutPostAuthSessionFlip"))}}var q=/&?(openid|aToken|serial)[^&]*/g,v=/&?trb_(open|auth|qty|warrAsin|sid|accessory(Asin|Offer))=[^&]*/g,
p=/&?trb_sid=([^&]*)/,A=/\?[?&]*/,r=/[?&]{2,}/g;m(n.location.search);return{buildFrom:function(a){l("Initial Query \x3d "+a);a=(a||"?").replace(q,"");a=a.replace(v,"");a+="\x26trb_auth\x3d1\x26trb_open\x3d1";var c=e.getQuantity();a+=1<c?"\x26trb_qty\x3d"+c:"";c=f.getLineItem();a+=c&&c.asin?"\x26trb_warrAsin\x3d"+c.asin:"";c=b.getSessionId();a+=0<c.length?"\x26trb_sid\x3d"+c:"";c=b.getActiveId();a+=c?"\x26trb_bid\x3d"+c:"";c=k.getLineItem();a+=c&&c.asin&&c.offerListingId?"\x26trb_accessoryAsin\x3d"+
c.asin+"\x26trb_accessoryOffer\x3d"+c.offerListingId:"";a=a.replace(A,"?").replace(r,"\x26");l("Final Query \x3d "+a);return a},isReturningFromAuthPortal:h,validateSession:m}});"use strict";f.when("turbo-checkout-csm","turbo-checkout-auto-open","turbo-checkout-authportal-return-query","turbo-checkout-page-ready").register("turbo-checkout-browser-signin",function(d,c,a){function b(){var a=n.location.search.match(e)?"turboCheckoutSigninSuccess":"turboCheckoutSigninFailed";d.logCount(a)}var e=/openid\.mode=id_res/,
f=/(\/ref=[^/]*\/?$|\/?$)/;a.isReturningFromAuthPortal(n.location.search)&&(d.logCount("turboCheckoutAuthPortalReturn"),b());return{show:function(b){b=b+(-1===b.indexOf("?")?"?":"\x26")+"openid.return_to\x3d";var e;e=a.buildFrom(n.location.search);e=encodeURIComponent("https://"+n.location.hostname+n.location.pathname.replace(f,"/ref\x3dtrb_chk_auth")+e);b+=e;d.logCount("turboCheckoutSignInUrlSize",b.length);c.reset();n.location.href=b}}});"use strict";f.when("turbo-checkout-utils","turbo-checkout-state-handler",
"turbo-checkout-page-ready").register("turbo-checkout-strings",function(d,c){function a(a){return function(){var e=c.getStrings()[a];if(e)return e;d.logDebug("turbo-checkout-strings",'String for key "'+a+'" is undefined! Returning empty string.');return""}}return{getHeaderText:a("TURBO_CHECKOUT_HEADER"),getLoadingText:a("TURBO_LOADING_TEXT")}});"use strict";f.when("jQuery","turbo-checkout-page-ready").register("turbo-checkout-loading-spinner",function(d){function c(){return d("#turbo-loading-container")}
function a(a){var c=d("\x3cdiv\x3e",{id:"turbo-loading-content"}).append(d("\x3cdiv\x3e",{id:"turbo-loading-spinner","class":"a-spinner a-spinner-medium"}));"string"===typeof a&&a&&c.append(d("\x3cdiv\x3e",{id:"turbo-loading-text",text:a}));return c}return{create:function(b){return d("\x3cdiv\x3e",{id:"turbo-loading-container"}).append(a(b))},get:c,show:function(){c().addClass("turbo-checkout-shown")}}});"use strict";f.when("A","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-eligibility-response-weblabs",
function(d,c){var a=[];return{set:function(b){d.$.isArray(b)&&(a=b)},get:function(){return a}}});"use strict";f.when("turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-session-storage",function(d,c){function a(a,d){c.logDebug("turbo-checkout-session-storage",a,d)}return{isPresent:function(b){var c;a:{try{c=n.sessionStorage.getItem(b);break a}catch(f){d.logCount("turboCheckoutSessionStorageExceptionGet"),a("get() exception",f)}c=null}return null!==c&&
c!==z},set:function(b,c){try{n.sessionStorage.setItem(b,c)}catch(f){d.logCount("turboCheckoutSessionStorageExceptionSet"),a("set() exception",f)}},remove:function(b){try{return n.sessionStorage.removeItem(b)}catch(c){d.logCount("turboCheckoutSessionStorageExceptionRemove"),a("remove() exception",c)}}}});"use strict";f.when("A","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-load-events",function(d,c){var a=c.get(c.KEYS.TWISTER_PAGE_UPDATE_AUI_EVENT);return{bind:function(b){d.off(a,
b);d.off("turbo:checkout:controller:onPageLoaded",b);d.on(a,b);d.on("turbo:checkout:controller:onPageLoaded",b)}}});"use strict";f.when("A","jQuery","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-buy-now-button","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-event-verification",function(d,c,a,b,e,f){function k(){var a=f.get(f.KEYS.BUY_NOW_CLICK_EVENT).split(".");return 1<a.length?a[1]:"turboCheckout"}function l(b){var c=b.map(function(a){return a.namespace}).filter(function(a,
b,c){return c.indexOf(a)===b});b.length!==c.length&&a.logCount("turboCheckoutBuyNowButtonDuplicateClickHandler")}function h(b){if((b=b.filter(function(a){return a!==z&&"click"===a.type&&0<=n.indexOf(a.namespace)}))&&0<b.length){var c=0;b.forEach(function(b){b.namespace!==k()&&(a.logCount("turboCheckoutBuyNowButtonClickHandlerWhitelisted:"+b.namespace),c++)});0<c&&a.logCount("turboCheckoutBuyNowButtonClickHandlerWhitelistedQuantity:"+c)}}function m(b){if((b=b.filter(function(a){return a!==z&&"click"===
a.type&&0>n.indexOf(a.namespace)}))&&0<b.length){var c=0;b.forEach(function(){a.logCount("turboCheckoutBuyNowButtonClickHandlerNotWhitelisted");c++});a.logCount("turboCheckoutBuyNowButtonClickHandlerNotWhitelistedQuantity:"+c)}}var q=!1,n=[k(),"accessoryUpsellInterstitial","makoPreRegistration","moq","siatc","hctpDFL","bbg","vasBuyNow","ppdBundles","makoGiftingMetrics","financialOptionsCheckout"];return{logBuyNowButtonClickHandlerMetrics:function(){var d=e.getBuyNowButtons();if(!q&&d&&0<d.length){for(var f=
0;f<d.length;f++){var g=c._data(d[f],"events");if(!g||!g.click){a.logCount("turboCheckoutBuyNowButtonNoBoundHandlers");return}var k=(g=g.click)?g.length:0;1<k&&(b.logDebug("turbo-checkout-event-verification","Multiple handlers bound to 'click' in Buy Now button. Number of handlers: "+k,void 0),a.logCount("turboCheckoutBuyNowButtonMultipleClickEventsBound"),a.logCount("turboCheckoutBuyNowButtonMultipleClickEventsBoundQuantity:"+k));l(g);m(g);h(g)}q=!0}}}})});
/* ******** */
(function(f){var p=window.AmazonUIPageJS||window.P,q=p._namespace||p.attributeErrors,a=q?q("TurboCheckoutDesktopAssets",""):p;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,p,q){f.when("turbo-configuration-keys","turbo-checkout-page-ready").register("turbo-device-configuration",function(a){var c;c||(c={},c[a.SHOW_SIGN_IN_INTERFACE]="turbo-checkout-browser-signin",c[a.EXTEND_ELIGIBLE_STATE]=!1,c[a.IS_DEVICE_FILTER_REQUIRED]=!0,c[a.VIEW_ADAPTER]="turbo-checkout-modal",
c[a.WARRANTY_CHECKBOX_INPUT_SELECTOR]="input[id^\x3dmbb-offeringID-]",c[a.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR]=".abbListItem",c[a.WARRANTY_OFFER_INPUT_SELECTOR]="input[id^\x3dmbb-offeringID-]:checked",c[a.WARRANTY_ASIN_INPUT_NAME]="asin");return c});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-checkout-device-variant","turbo-checkout-is-touch-and-orientation-enabled","turbo-checkout-page-ready").register("turbo-checkout-device-filter",function(a,
c,k,f,g,p){function h(a){var b=!1;this.countOnce=function(){b||(c.logCount(a),b=!0)}}function d(a){k.logDebug("turbo-checkout-device-filter",a)}var q="turboCheckoutDisabledDesktopAuiVariant"+g,l,b,u,v,r,m,w;return{isDeviceTurboEligible:function(){l=l||new h("Desktop"===g?"turboCheckoutDesktopAuiVariantEligible":q);var e;(e=b)||(e=k.isInternetExplorer()?"turboCheckoutDisabledDesktopIE":k.isIPad()?"turboCheckoutDisabledDesktopIPad":k.isIPhone()?"turboCheckoutDisabledDesktopIPhone":k.isAndroid()?"turboCheckoutDisabledDesktopAndroid":
"turboCheckoutDesktopUserAgentEligible",e=new h(e));b=e;u=u||new h("turboCheckoutDisabledDesktopTouch");v=v||new h("turboCheckoutDisabledDesktopOrientation");r=r||new h("turboCheckoutDisabledDesktopTouchAndOrientation");m=m||new h("turboCheckoutDisabledTurboDesktopOnDevice");w=w||new h("turboCheckoutEnabledTurboDesktopOnDevice");l.countOnce();"Desktop"===g||d("Aui device variant is NOT Desktop. Turbo will NOT show. Variant is "+g);(e="Desktop"!==g)||(b.countOnce(),e=!!(k.isInternetExplorer()||k.isIPad()||
k.isAndroid()||k.isIPhone()));if(e)return m.countOnce(),!1;if(e=a.capabilities.touch)u.countOnce(),d("Touch enabled device. Turbo will NOT show");var c=a.capabilities.orientation;c&&(v.countOnce(),d("Orientation enabled device. Turbo will NOT show"));e&&c&&r.countOnce();if((e||c)&&!p)return m.countOnce(),!1;w.countOnce();return!0},isSignInSupported:function(){return f.get(f.KEYS.IS_SIGN_IN_SUPPORTED)}}});"use strict";f.when("turbo-checkout-page-ready").execute(function(){f.declare("turbo-checkout-device-variant",
"Desktop")});"use strict";f.when("A","a-modal","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-iframe","turbo-checkout-base-view","turbo-checkout-loading-spinner","turbo-checkout-view-state","turbo-checkout-ref-tagger","turbo-checkout-strings","turbo-checkout-page-ready").register("turbo-checkout-modal",function(a,c,f,E,g,F,h,d,z,l){function b(a){E.logDebug("turbo-checkout-modal",a)}function u(){!A()||d.isOpeningOrOpen()?b("show() suppressed. View is null or undefined or view state is opening or open"):
(d.setToOpening(),m().show())}function v(){x&&d.isOpeningOrOpen()&&(g.appendTo(e()),g.write(x))}function r(){g.remove();if(0<e().length)b("Modal frame is in DOM. Inserting Spinner"),e().height("").html(h.create(l.getLoadingText())).append(w()),t("#turbo-checkout-modal-header").text(l.getHeaderText());else{b("Modal frame is NOT in DOM. Resetting Modal");var a={inlineContent:t("\x3cdiv\x3e",{id:"turbo-checkout-frame"}).html(h.create(l.getLoadingText())).append(w()).prop("outerHTML"),padding:"none",
dataStrategy:"inline",header:'\x3cdiv id\x3d"turbo-checkout-modal-header"\x3e'+l.getHeaderText()+"\x3c/div\x3e"};m().update(a)}}function m(){return B=B||c.get(t("#turbo-checkout-modal"))}function w(){return t("\x3cscript/\x3e",{type:"text/javascript",html:'P.when("A").execute(function turboFrameReady(A) { A.trigger("turbo:checkout:frame:ready"); });'})}function e(){return t("#turbo-checkout-frame")}function y(a){!A()||d.isClosingOrClosed()?b("close() suppressed. View is undefined or null or view state is closing or closed"):
(n=a||n,n.notify=!0===n.notify||n.notify===q,d.setToClosing(),m().hide())}function A(){var a=m();a||b("Modal is undefined or null. Modal \x3d "+a);return a?!0:!1}function C(b){t(document.body).unbind("click");b();a.trigger("turbo:checkout:sheet:onNavigateAway");y({notify:!1,immediate:!0,doNotLog:!0})}function D(a){b("onDismiss");n={notify:!0,reason:a}}var t=a.$,n={},x,B,G=new (F.extend())("#turbo-checkout-frame");g.onContentLoaded(function(a){h.get().remove()});a.on("a:popover:dismiss:turbo",function(){b("onClick_X");
D(z.TAGS.TOUCH_X)});a.declarative("a-popover-floating-close","click",function(){b("onDimmerClicked");D(z.TAGS.TOUCH)});a.on("a:popover:beforeShow:turbo",function(){b("onBeforeOpen");d.setToOpening("turbo:checkout:sheet:beforeOpen");r()});a.on("a:popover:show:turbo",function(){b("onOpen");d.setToOpen();x||h.show()});a.on("a:popover:beforeHide:turbo",function(){b("onBeforeClose");d.setToClosing.apply(d,!0===n.notify?["turbo:checkout:sheet:beforeClose",n]:q);e().removeClass("turbo-checkout-shown")});
a.on("a:popover:hide:turbo",function(){b("onClose");d.setToClosed("turbo:checkout:sheet:afterClose");n={}});a.on("a:popover:afterHide:turbo",r);a.on("turbo:checkout:sheet:doOpen",u);a.on("turbo:checkout:sheet:doClose",y);a.on("turbo:checkout:frame:ready",v);a.on(a.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,function(){f.logCount("turboCheckoutDesktopOrientationChange");d.isOpen()&&f.logCount("turboCheckoutDesktopOrientationChangeWhenModalOpen")});a.on("turbo:checkout:state:product:resolved",function(){t("#turbo-checkout-modal-header").text(l.getHeaderText())});
return{show:u,setContent:function(a){x=a;b("iFrame content saved");d.isOpeningOrOpen()?v():(b("setFrameContent NOT called"),b("viewState is not opening? isOpeningOrOpen \x3d "+d.isOpeningOrOpen()),b("iFrame already has content? iFrame.hasContent \x3d "+g.hasContent()))},removeContent:function(){x="";r()},close:y,closeToFullscreen:function(a){C(function(){p.location.href=a})},closeImmediatelyThenExecute:C,closeAndNavigate:function(b){p.location.href=b;a.trigger("turbo:checkout:sheet:onNavigateAway");
y({notify:!1,doNotLog:!0})},registerCallbacks:g.registerCallbacks,updateBounds:function(a){G.updateBounds(a)}}});"use strict";f.declare("turbo-checkout-is-touch-and-orientation-enabled",!1)});
/* ******** */
(function(c){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,a=e?e("DetailPageTurboCheckoutDesktopAssets",""):d;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,d,e){c.when("turbo-configuration-keys","turbo-checkout-page-ready").register("turbo-client-configuration",function(a){var b;b||(b={},b[a.HOST_PAGE_TYPE_IDENTIFIER]="detail",b[a.BUY_NOW_ONLY_TREATMENT]="T1",b[a.NO_PREFETCH_TREATMENT]=/T[2-9]/,b[a.ADDRESS_INPUT_SELECTORS]=["#unifiedLocation1ClickAddress",
"#addToCart input[name\x3d'dropdown-selection']","#unifiedLocationAddress","input[name\x3d'dropdown-selection']"],b[a.QUANTITY_SELECT_SELECTOR]="#quantity",b[a.CONFLICTING_INITIATE_LISTENERS]=["click.siatc"],b[a.VAS_CHANGE_EVENTS]=["vas:remove-service-asin-buybox-event","vas:add-service-asin-buybox-event"],b[a.VAS_CHECKBOX_SELCTOR]="#ppdb-add-service-checkbox");return b})});
/* ******** */
